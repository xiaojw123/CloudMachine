package com.cloudmachine.activities;

import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.WindowManager;
import android.view.animation.AnticipateInterpolator;
import android.view.animation.BounceInterpolator;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.RelativeLayout;

import com.cloudmachine.R;
import com.cloudmachine.utils.Constants;
import com.rey.material.app.BottomSheetDialog;

/**
 * 项目名称：CloudMachine
 * 类描述：购买云盒子确认信息页面
 * 创建人：shixionglu
 * 创建时间：2017/2/7 上午10:16
 * 修改人：shixionglu
 * 修改时间：2017/2/7 上午10:16
 * 修改备注：
 */

public class ConfirmInformationActivity extends BaseAutoLayoutActivity implements View.OnClickListener {

    private RelativeLayout mRlBrand;
    private RelativeLayout mRlModel;
    private RelativeLayout mRlContactName;
    private RelativeLayout mRlPhoneNumber;
    private RelativeLayout mRlLocation;
    private RelativeLayout mRlStreetAddress;
    private RelativeLayout mRlWeiXinPay;
    private RelativeLayout mRlAliPay;
    private RelativeLayout mRlCoupon;
    private RelativeLayout mRlDistributionMode;
    private RelativeLayout mRlInstallationTime;
    private Button mBtnToPay;
    private CheckBox mCbAliPay;
    private CheckBox mCbWeiXinPay;
    private Context mContext;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_confirminformation);
        mContext = this;
        gotoEditActivity(Constants.E_DEVICE_LIST,
                Constants.E_ITEMS_category, "", "", "", "机型");
        initView();
    }

    private void initView() {

        mRlBrand = (RelativeLayout) findViewById(R.id.rl_brand);
        mRlBrand.setOnClickListener(this);
        mRlModel = (RelativeLayout) findViewById(R.id.rl_model);
        mRlModel.setOnClickListener(this);
        mRlContactName = (RelativeLayout) findViewById(R.id.rl_contact_name);
        mRlContactName.setOnClickListener(this);
        mRlPhoneNumber = (RelativeLayout) findViewById(R.id.rl_phone_number);
        mRlPhoneNumber.setOnClickListener(this);
        mRlLocation = (RelativeLayout) findViewById(R.id.rl_location);
        mRlLocation.setOnClickListener(this);
        mRlStreetAddress = (RelativeLayout) findViewById(R.id.rl_street_adress);
        mRlStreetAddress.setOnClickListener(this);
        mRlWeiXinPay = (RelativeLayout) findViewById(R.id.rl_weixin_pay);
        mRlWeiXinPay.setOnClickListener(this);
        mRlAliPay = (RelativeLayout) findViewById(R.id.rl_alipay);
        mRlAliPay.setOnClickListener(this);
        mRlCoupon = (RelativeLayout) findViewById(R.id.rl_coupon);
        mRlCoupon.setOnClickListener(this);
        mRlDistributionMode = (RelativeLayout) findViewById(R.id.rl_distribution_mode);
        mRlDistributionMode.setOnClickListener(this);
        mRlInstallationTime = (RelativeLayout) findViewById(R.id.rl_installation_time);
        mRlInstallationTime.setOnClickListener(this);
        mBtnToPay = (Button) findViewById(R.id.btn_topay);
        mBtnToPay.setOnClickListener(this);
        mCbAliPay = (CheckBox) findViewById(R.id.cb_alipay);
        mCbWeiXinPay = (CheckBox) findViewById(R.id.cb_weixin_pay);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.rl_brand://品牌
               /* gotoEditActivity(Constants.E_DEVICE_LIST, Constants.E_ITEMS_brand,
                        PK_PROD_DEF, "", "", "品牌");*/
                break;
            case R.id.rl_model://型号
                break;
            case R.id.rl_contact_name://联系人姓名
                break;
            case R.id.rl_phone_number://电话号码
                break;
            case R.id.rl_location://所在地区
                break;
            case R.id.rl_street_adress://街道地址
                break;
            case R.id.rl_weixin_pay://微信支付
                mCbWeiXinPay.setChecked(!mCbWeiXinPay.isChecked());
                break;
            case R.id.rl_alipay://支付宝支付
                mCbAliPay.setChecked(!mCbAliPay.isChecked());
                break;
            case R.id.rl_coupon://优惠券
                showCounponDialog();
                break;
            case R.id.rl_distribution_mode://配送方式
                showDistributionModeDialog();
                break;
            case R.id.rl_installation_time://安装时间
                break;
            case R.id.btn_topay://去付款
                break;
            default:
                break;
        }
    }


    //选择配送方式弹窗
    private void showDistributionModeDialog() {
        WindowManager wm = this.getWindowManager();
        int width = wm.getDefaultDisplay().getWidth();
        int height = wm.getDefaultDisplay().getHeight();
        RelativeLayout root = (RelativeLayout) LayoutInflater.from(ConfirmInformationActivity.this).
                inflate(R.layout.dialog_counpon, null);
        BottomSheetDialog distributeDialog = new BottomSheetDialog(ConfirmInformationActivity.this);
        distributeDialog.contentView(root)
                .heightParam(height / 3)
                .inDuration(500)
                .outDuration(500)
                .inInterpolator(new BounceInterpolator())
                .outInterpolator(new AnticipateInterpolator())
                .show();
    }

    private void showCounponDialog() {

       /* Dialog counponDialog = new Dialog(ConfirmInformationActivity.this, R.style.my_dialog);
        RelativeLayout root = (RelativeLayout) LayoutInflater.from(ConfirmInformationActivity.this).
                inflate(R.layout.dialog_counpon, null);
        counponDialog.setContentView(root);
        Window dialogWindow = counponDialog.getWindow();
        dialogWindow.setGravity(Gravity.BOTTOM);
        dialogWindow.setWindowAnimations(R.style.counponDialog);
        WindowManager.LayoutParams lp = dialogWindow.getAttributes();
        lp.y = 20;
        dialogWindow.setAttributes(lp);
        counponDialog.show();*/
    }

    // v1用来传nc类型id，v2用来传nc品牌id，v4用来传类型id
    private void gotoEditActivity(int editType, int itemType, String v1,
                                  String v2, String v3, String titleName) {

        Bundle bundle = new Bundle();
        bundle.putString(Constants.P_TITLETEXT, titleName);
        // bundle.putString(Constants.P_EDITRESULTSTRING, view.getContent());
        bundle.putInt(Constants.P_EDITTYPE, editType);
        bundle.putInt(Constants.P_ITEMTYPE, itemType);
        bundle.putString(Constants.P_EDIT_LIST_VALUE1, v1);
        bundle.putString(Constants.P_EDIT_LIST_VALUE2, v2);
        Constants.toActivityForR(this, EditLayoutActivity.class, bundle, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        switch (requestCode) {
            case RESULT_OK:
                break;
        }

    }
}
